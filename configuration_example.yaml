# Configuration pour Home Assistant - à mettre dans configuration.yaml

imo_relay:
  port: "/dev/ttyUSB0"  # Sur Raspberry Pi: /dev/ttyUSB0 ou /dev/ttyUSB1
  baudrate: 38400
  bytesize: 8
  slave_id: 1
  name: "IMO Ismart SMT-CD-T20"
  
  # Définir vos relais/coils personnalisés
  relays:
    - name: "Pompe Piscine"
      address: 0x0551
      icon: mdi:pump
      device_class: switch
    
    - name: "Lumière Jardin"
      address: 0x0552
      icon: mdi:lightbulb
      device_class: outlet
    
    - name: "Portail Garage"
      address: 0x0553
      icon: mdi:garage
    
    - name: "Ventilateur"
      address: 0x0554
      icon: mdi:fan

# Automation exemple
automation:
  - alias: "Allumer Relay 1"
    trigger:
      platform: state
      entity_id: input_boolean.test_relay1
      to: "on"
    action:
      service: imo_relay.write_coil
      data:
        address: 0x0551
        state: true

  - alias: "Éteindre Relay 1"
    trigger:
      platform: state
      entity_id: input_boolean.test_relay1
      to: "off"
    action:
      service: imo_relay.write_coil
      data:
        address: 0x0551
        state: false

# Helper pour tester
input_boolean:
  test_relay1:
    name: "Test Relay 1"
    icon: mdi:power
